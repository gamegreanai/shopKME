{% extends 'base/base.html' %}
{% load static %}
{% block title %}DDreamclinic{% endblock %}

{% block content %}
<div class="container py-5" style="margin-top:130px;">

  <!-- üîπ ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -->
  <div class="card border-0 shadow-sm rounded-4 mb-4 overflow-hidden position-relative member-bg"
       style="
         background-image: url('/media/gard.png');
         background-size: cover;
         background-position: center;
         background-repeat: no-repeat;
       ">
    <div class="overlay position-absolute top-0 start-0 w-100 h-100"></div>

    <div class="card-body d-flex flex-column flex-md-row align-items-start justify-content-between position-relative text-white member-content">
      
      <!-- üî∏ ‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏•‡πÄ‡∏ß‡∏• -->
      <div class="d-flex flex-column align-items-start gap-3 member-left">

        <!-- üèÖ ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô + ‡∏£‡∏∞‡∏î‡∏±‡∏ö -->
        <div class="member-info d-flex align-items-center gap-3 flex-wrap">
          {% if meter.level == "Silver" %}
            <i class="fa fa-medal level-icon text-silver"></i>
          {% elif meter.level == "Gold" %}
            <i class="fa fa-medal level-icon text-gold"></i>
          {% else %}
            <i class="fa fa-crown level-icon text-premium"></i>
          {% endif %}
          <span class="badge rounded-pill shadow-sm text-white fw-bold member-badge">
            ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: {{ meter.level }}
          </span>
        </div>

        <!-- üíé ‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏° -->
        <p class="mt-1 mb-0 text-outline member-points">
          ‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°: <strong>{{ meter.points|default:0 }}</strong> pts
        </p>

        <!-- üåà Progress -->
        <div class="progress-wrapper mt-2 w-100" style="max-width: 400px;">
          <div class="d-flex justify-content-between small mb-1 text-outline member-progress-text">
            <span>
              {% if meter.level == "Silver" %} Silver
              {% elif meter.level == "Gold" %} Gold
              {% else %} Premium {% endif %}
            </span>
            <span>{{ meter.progress_pct }}%</span>
          </div>
          <div class="progress bg-light bg-opacity-50 member-progress-bar">
            <div class="progress-bar member-progress" style="width: {{ meter.progress_pct }}%;"></div>
          </div>
          <div class="small text-outline mt-2 fw-semibold member-progress-text">
            {% if meter.next_level_name %}
              ‡∏≠‡∏µ‡∏Å <strong>{{ meter.remain_to_next }}</strong> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏õ‡πá‡∏ô <strong>{{ meter.next_level_name }}</strong>
            {% else %}
              ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß üéâ
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- üå∏ CSS -->
<style>
  body {
    background-color: #f8f9fa;
  }

  /* üéÄ ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
  .member-bg {
    min-height: clamp(240px, 30vw, 320px);
    color: white;
    position: relative;
    border-radius: 1.25rem;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    display: flex;
    align-items: center;
  }

  .member-bg:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
  }

  .member-bg .overlay {
    background: rgba(0, 0, 0, 0.35);
    z-index: 1;
  }

  .member-content {
    z-index: 2;
    padding: clamp(1.2rem, 3vw, 2.5rem);
    width: 100%;
  }

  /* üå∏ ‡∏à‡∏±‡∏î‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î */
  .member-left {
    align-items: flex-start;
    text-align: left;
    max-width: 600px;
  }

  /* üéÄ Badge */
  .member-badge {
    background-color: #ff008b !important;
    font-size: clamp(0.9rem, 2vw, 1.3rem);
    padding: clamp(0.4rem, 1vw, 0.7rem) clamp(1rem, 2vw, 1.5rem);
    letter-spacing: 0.5px;
    box-shadow: 0 2px 6px rgba(255, 0, 139, 0.4);
  }

  /* üíñ ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏•‡∏±‡∏Å */
  .text-outline,
  .member-points,
  .member-progress-text {
    color: #fff;
    font-size: clamp(0.9rem, 2vw, 1.3rem);
    font-weight: 600;
    text-shadow:
      -1px -1px 0 #ff66c8,
       1px -1px 0 #ff66c8,
      -1px  1px 0 #ff66c8,
       1px  1px 0 #ff66c8;
  }

  .member-info strong {
    color: #ff008b;
    font-weight: 800;
    text-shadow: 0 0 6px rgba(255, 255, 255, 0.8);
  }

  /* üåà Progress Bar */
  .progress {
    border-radius: 50px;
  }

  .member-progress-bar {
    height: clamp(8px, 1vw, 14px);
  }

  .member-progress {
    background: linear-gradient(90deg, #ff008b, #ff66c8) !important;
    border-radius: 50px;
    transition: width 0.5s ease-in-out;
  }

  /* üåü ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
  .level-icon {
    font-size: clamp(1.8rem, 3vw, 2.5rem);
    filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.6));
  }

  .text-silver { color: #c0c0c0; }
  .text-gold { color: #ffd700; }
  .text-premium { color: #ff66c8; }

  /* üì± Layout Responsive */
  @media (max-width: 992px) {
    .member-left {
      padding-left: 0 !important;
      align-items: center;
      text-align: center;
    }

    .member-info {
      flex-direction: column;
      gap: 0.5rem;
    }

    .progress-wrapper {
      max-width: 90%;
      margin: 0 auto;
    }
  }

  @media (max-width: 768px) {
    .member-bg {
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }

    .member-left {
      align-items: center;
      text-align: center;
    }

    .member-badge {
      font-size: clamp(0.85rem, 4vw, 1rem);
    }

    .text-outline,
    .member-points,
    .member-progress-text {
      font-size: clamp(0.9rem, 4vw, 1rem);
    }

    .level-icon {
      font-size: clamp(1.5rem, 5vw, 2rem);
    }
  }
</style>
{% endblock %}
