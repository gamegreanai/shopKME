{% extends 'base/base.html' %}
{% block title %}‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà | shopKME{% endblock %}
{% block content %}

<div class="container-fluid p-4 bg-light">
   {# ----- ‡πÅ‡∏ñ‡∏ö Points & Level ----- #}
  <div class="card shadow-sm border-0 mb-3">
    <div class="card-body d-flex flex-column flex-md-row align-items-md-center justify-content-between">
      <div class="mb-3 mb-md-0">
        <span class="badge bg-success rounded-pill px-3 py-2 fs-6">
          ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: {{ meter.level }}
        </span>
        <span class="ms-2 text-muted">‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°: <strong>{{ meter.points|default:0 }}</strong> pts</span>
      </div>
      <div class="w-100 w-md-50" style="max-width:520px;">
        <div class="d-flex justify-content-between small mb-1">
          <span>
            {% if meter.level == "Silver" %} Silver {% elif meter.level == "Gold" %} Gold {% else %} Premium {% endif %}
          </span>
          <span>{{ meter.progress_pct }}%</span>
        </div>
        <div class="progress" role="progressbar" aria-valuenow="{{ meter.progress_pct }}" aria-valuemin="0" aria-valuemax="100">
          <div class="progress-bar" style="width: {{ meter.progress_pct }}%"></div>
        </div>
        <div class="small text-muted mt-1">
          {% if meter.next_level_name %}
            ‡∏≠‡∏µ‡∏Å <strong>{{ meter.remain_to_next }}</strong> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏õ‡πá‡∏ô <strong>{{ meter.next_level_name }}</strong>
          {% else %}
            ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß üéâ
          {% endif %}
        </div>
      </div>
    </div>
  </div>
   {% if user.first_name and user.last_name and user.email and profile.title and profile.gender and profile.house_no and profile.moo and profile.street and profile.subdistrict and profile.district and profile.province and profile.postal_code %}

        <div class="row g-3">
          <div class="col-md-3"><strong>‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠</strong><div>{{ profile.title }}</div></div>
          <div class="col-md-4"><strong>‡∏ä‡∏∑‡πà‡∏≠</strong><div>{{ user.first_name }}</div></div>
          <div class="col-md-5"><strong>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</strong><div>{{ user.last_name }}</div></div>
          <div class="col-md-3"><strong>‡πÄ‡∏û‡∏®</strong><div>{{ profile.gender }}</div></div>
          <div class="col-md-6"><strong>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</strong><div>{{ user.email }}</div></div>
          <div class="col-md-6"><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</strong><div>{{ user.phone }}</div></div>
          <div class="col-12"><hr></div>
          <div class="col-md-3"><strong>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô</strong><div>{{ profile.house_no }}</div></div>
          <div class="col-md-2"><strong>‡∏´‡∏°‡∏π‡πà</strong><div>{{ profile.moo }}</div></div>
          <div class="col-md-7"><strong>‡∏ñ‡∏ô‡∏ô</strong><div>{{ profile.street }}</div></div>
          <div class="col-md-6"><strong>‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•</strong><div>{{ profile.subdistrict }}</div></div>
          <div class="col-md-6"><strong>‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</strong><div>{{ profile.district }}</div></div>
          <div class="col-md-6"><strong>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</strong><div>{{ profile.province }}</div></div>
          <div class="col-md-6"><strong>‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</strong><div>{{ profile.postal_code }}</div></div>
        </div>

  {% else %}
  <form method="post" novalidate>
    {% csrf_token %}
    {{ form.non_field_errors }}

    <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div class="card shadow-sm border-0 mb-3">
      <div class="card-body">
        <h5 class="fw-bold mb-3">
          <i class="fa fa-id-card me-2"></i> ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠
        </h5>

        <div class="row g-3">
          <div class="col-md-2">
            <label class="form-label" for="{{ form.title.id_for_label }}">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠</label>
            {{ form.title }}
          </div>
          <div class="col-md-5">
            <label class="form-label" for="{{ form.first_name.id_for_label }}">‡∏ä‡∏∑‡πà‡∏≠</label>
            {{ form.first_name }}
          </div>
          <div class="col-md-5">
            <label class="form-label" for="{{ form.last_name.id_for_label }}">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
            {{ form.last_name }}
          </div>

          <div class="col-md-2">
            <label class="form-label" for="{{ form.gender.id_for_label }}">‡πÄ‡∏û‡∏®</label>
            {{ form.gender }}
          </div>
          <div class="col-md-4">
            <label class="form-label" for="{{ form.email.id_for_label }}">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
            {{ form.email }}
          </div>
          <div class="col-md-3">
            <label class="form-label" for="{{ form.phone.id_for_label }}">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
            {{ form.phone }}
          </div>
        </div>
      </div>
    </div>

    <!-- ‡∏Å‡∏≤‡∏£‡πå‡∏î: ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà -->
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h5 class="fw-bold mb-3">
          <i class="fa fa-home me-2"></i> ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠/‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
        </h5>

        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label" for="{{ form.house_no.id_for_label }}">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô</label>
            {{ form.house_no }}
          </div>
          <div class="col-md-2">
            <label class="form-label" for="{{ form.moo.id_for_label }}">‡∏´‡∏°‡∏π‡πà</label>
            {{ form.moo }}
          </div>
          <div class="col-md-7">
            <label class="form-label" for="{{ form.street.id_for_label }}">‡∏ñ‡∏ô‡∏ô</label>
            {{ form.street }}
          </div>

          <div class="col-md-6">
            <label class="form-label" for="{{ form.subdistrict.id_for_label }}">‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•</label>
            {{ form.subdistrict }}
          </div>
          <div class="col-md-6">
            <label class="form-label" for="{{ form.district.id_for_label }}">‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</label>
            {{ form.district }}
          </div>
          <div class="col-md-6">
            <label class="form-label" for="{{ form.province.id_for_label }}">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label>
            {{ form.province }}
          </div>
          <div class="col-md-6">
            <label class="form-label" for="{{ form.postal_code.id_for_label }}">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</label>
            {{ form.postal_code }}
          </div>
        </div>
      </div>
    </div>

    <div class="mt-4">
      <button type="submit" class="btn btn-success">
        <i class="fa fa-save me-1"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
      </button>
    </div>
  </form>
{% endif %}
</div>

{% endblock %}
