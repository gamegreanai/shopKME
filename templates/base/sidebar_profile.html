{% load static %}

<style>
  /* üé® ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Sidebar */
  .sidebar {
    width: 280px;
    background-color: #f5fff6;
    border-right: 1px solid #ddd;
    min-height: 100vh;
    position: fixed;
    left: 0;
    top: 65px; /* ‚úÖ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ navbar */
    z-index: 1040;
    overflow-y: auto;
    padding-bottom: 80px;
  }

  .sidebar-header {
    background-color: #bff0c2;
    padding: 20px;
    border-bottom: 1px solid #d9f2dc;
    text-align: center;
  }

  .sidebar-header h5 {
    font-weight: bold;
    color: #2b7a32;
    margin-bottom: 0;
  }

  .sidebar-header h4 {
    font-weight: bold;
    color: #198754;
    margin-top: 5px;
  }

  .sidebar-header small {
    font-size: 14px;
    color: #198754;
  }

  .sidebar-section {
    padding: 15px 0;
    border-bottom: 1px solid #eee;
  }

  .sidebar-section h6 {
    font-weight: bold;
    color: #555;
    font-size: 14px;
    margin-left: 15px;
    margin-bottom: 10px;
  }

  .sidebar a {
    display: flex;
    align-items: center;
    padding: 10px 20px;
    color: #333;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .sidebar a:hover,
  .sidebar a.active {
    background-color: #e9f8ec;
    color: #198754;
  }

  .sidebar a i {
    width: 25px;
    font-size: 18px;
    color: #198754;
    margin-right: 10px;
  }

  .logout-btn {
    margin: 15px;
    border: 2px solid #198754;
    color: #198754;
    font-weight: bold;
    border-radius: 25px;
    padding: 10px 0;
    transition: all 0.3s ease;
    text-align: center;
    text-decoration: none;
  }

  .logout-btn:hover {
    background-color: #198754;
    color: white;
  }

  /* ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ö Sidebar */
  @media (min-width: 992px) {
    .main-content {
      margin-left: 280px; /* ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á Sidebar */
      padding: 20px;
      transition: margin-left 0.3s ease;
    }
  }

  /* ‚úÖ Footer Menu (Mobile / iPad) */
  .footer-menu {
    display: none;
  }

  @media (max-width: 991px) {
    .sidebar {
      display: none;
    }

    .footer-menu {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background-color: #ffffff;
      border-top: 1px solid #ddd;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 8px 0;
      z-index: 1050;
    }

    .footer-menu a {
      text-align: center;
      color: #777;
      font-size: 12px;
      text-decoration: none;
      flex: 1;
      transition: color 0.2s ease;
    }

    .footer-menu a.active {
      color: #198754;
      font-weight: 600;
    }

    .footer-menu i {
      font-size: 18px;
      display: block;
      margin-bottom: 3px;
    }

    body {
      padding-bottom: 65px; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô footer ‡∏ó‡∏±‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
    }

    .main-content {
      margin-left: 0; /* ‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Sidebar ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
      padding: 15px;
    }
  }
</style>

<!-- üîπ Sidebar -->
 <div class="main-content">
<div class="sidebar shadow-sm">
  <a href="/account/dashboard/" class="sidebar-header text-decoration-none d-block mb-3">
    <div class="p-3 rounded">
      <h5 id="greeting" class="fw-bold mb-1">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ</h5>
      <h4 class="fw-bold text-success">{{ user.phone|default:"099-XXX-XXXX" }}</h4>
      <small>‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</small>
    </div>
  </a>

  <div class="sidebar-section">
    <h6>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h6>
    <a href="/account/dashboard/" class="{% if request.path == '/account/dashboard/' %}active{% endif %}">
      <i class="fa fa-home"></i> ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
    </a>
    <a href="/account/profile/" class="{% if request.path == '/account/profile/' %}active{% endif %}">
      <i class="fa fa-user"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
    </a>
    <a href="/account/address/" class="{% if request.path == '/account/address/' %}active{% endif %}">
      <i class="fa fa-map-marker-alt"></i> ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
    </a>
    <a href="/account/redeem/" class="{% if request.path == '/account/redeem/' %}active{% endif %}">
      <i class="fa fa-gift"></i> ‡πÅ‡∏•‡∏Å Point
    </a>
  </div>

  {% if user.is_staff or user.is_superuser %}
  <div class="sidebar-section">
    <h6>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</h6>
    <a href="/account/coupon/" class="{% if request.path == '/account/coupon/' %}active{% endif %}">
      <i class="fa fa-ticket-alt"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á
    </a>
    <a href="/account/staff/points/" class="{% if request.path == '/account/staff/points/' %}active{% endif %}">
      <i class="fa fa-gem"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πâ‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    </a>
  </div>
  {% endif %}

  <a href="/account/logout/" class="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
</div>

<!-- üîπ Footer Menu (‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ / iPad) -->
<nav class="footer-menu">
  <a href="/account/dashboard/" class="{% if request.path == '/account/dashboard/' %}active{% endif %}">
    <i class="fa fa-home"></i>
    <span>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
  </a>
  <a href="/account/profile/" class="{% if request.path == '/account/profile/' %}active{% endif %}">
    <i class="fa fa-user"></i>
    <span>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
  </a>
  <a href="/account/address/" class="{% if request.path == '/account/address/' %}active{% endif %}">
    <i class="fa fa-map-marker-alt"></i>
    <span>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</span>
  </a>
  <a href="/account/redeem/" class="{% if request.path == '/account/redeem/' %}active{% endif %}">
    <i class="fa fa-gift"></i>
    <span>‡πÅ‡∏•‡∏Å Point</span>
  </a>
  <a href="/account/logout/">
    <i class="fa fa-sign-out-alt"></i>
    <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
  </a>
</nav>
</div>

<!-- üîπ Script: ‡∏Ñ‡∏≥‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢ -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const greetingEl = document.getElementById("greeting");
    if (!greetingEl) return;

    const hour = new Date().getHours();
    let greetingText = "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ";
    if (hour >= 5 && hour < 12) greetingText = "üåÖ ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤";
    else if (hour >= 12 && hour < 18) greetingText = "üå§Ô∏è ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡∏ö‡πà‡∏≤‡∏¢";
    else greetingText = "üåô ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô";
    greetingEl.textContent = greetingText;
  });
</script>
